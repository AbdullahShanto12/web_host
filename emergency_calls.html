
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Emergency & Trusted Contacts - SafeWay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Font & AdminLTE CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  
  
  <style>
  /* ------------------------------------------------------
     ✅ GENERAL LAYOUT & COLOR THEME STYLES
  ---------------------------------------------------------*/
  body {
    font-family: 'Source Sans Pro', sans-serif;
    background-color: #f9fafe;
  }

  .content-wrapper {
    background: #fdfefe;
    padding: 40px 35px 60px;
    min-height: calc(100vh - 56px);
  }

  /* ------------------------------------------------------
     ✅ NAVBAR STYLING
  ---------------------------------------------------------*/
  .main-header.navbar {
    background: #004085;
    color: white;
    font-weight: 600;
    box-shadow: 0 3px 8px rgba(0, 64, 133, 0.3);
  }

  .main-header.navbar .nav-link,
  .main-header.navbar .nav-icon {
    color: #cce0ff;
    transition: color 0.3s ease;
  }

  .main-header.navbar .nav-link:hover {
    color: #ffffff;
  }

  /* ------------------------------------------------------
     ✅ SIDEBAR STYLING
  ---------------------------------------------------------*/
  .main-sidebar {
    background-color: rgb(28, 31, 34);
    color: #ffffff;
  }

  .main-sidebar .brand-link {
    background-color: rgb(34, 38, 43);
    color: #ffffff;
    font-weight: bold;
    border-bottom: 1px solid #003366;
  }

  .main-sidebar .nav-link {
    color: #cfd9ff;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .main-sidebar .nav-link .nav-icon {
    color: #a0b8ff;
  }

  .main-sidebar .nav-link.active,
  .main-sidebar .nav-link:hover {
    background-color: #e6f0ff;
    color: #001f3f;
    font-weight: bold;
    border-radius: 8px;
  }

  .main-sidebar .nav-link.active .nav-icon,
  .main-sidebar .nav-link:hover .nav-icon {
    color: #001f3f;
  }

  /* ------------------------------------------------------
     ✅ BUTTON STYLES
  ---------------------------------------------------------*/
  .btn-panic {
    background-color: #dc3545;
    color: #fff;
    font-size: 1.2rem;
    padding: 15px;
    border: none;
    border-radius: 10px;
    width: 100%;
    margin-bottom: 15px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .btn-panic:hover {
    background-color: #c82333;
  }

  /* ------------------------------------------------------
     ✅ CALL BUTTON STYLING
  ---------------------------------------------------------*/
  .call-button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    transition: background-color 0.2s ease;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  .call-button:hover {
    background-color: #e2e6ea;
  }

  .call-icon {
    font-size: 1.8rem;
    margin-right: 10px;
    color: #007bff;
  }

  /* ------------------------------------------------------
     ✅ QR CODE BOX STYLE
  ---------------------------------------------------------*/
  .qr-box {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 10px;
    text-align: center;
    padding: 15px;
    box-shadow: 0 1px 6px rgba(0,0,0,0.1);
  }

  /* ------------------------------------------------------
     ✅ VOICE NOTE TEXT STYLE
  ---------------------------------------------------------*/
  .voice-note {
    font-style: italic;
    color: #555;
    margin-top: 8px;
  }

  /* ------------------------------------------------------
     ✅ SECTION TITLE STYLE
  ---------------------------------------------------------*/
  .section-title {
    font-size: 1.2rem;
    font-weight: bold;
    margin-top: 30px;
    margin-bottom: 15px;
    color: #003366;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  /* ------------------------------------------------------
     ✅ INFO BOX STYLE
  ---------------------------------------------------------*/
  .info-box {
    background-color: #e9ecef;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
    color: #333;
  }

  /* ------------------------------------------------------
     ✅ FORM CONTROL SPACING
  ---------------------------------------------------------*/
  .form-control {
    margin-bottom: 10px;
  }

  /* ------------------------------------------------------
     ✅ HEADER STYLE
  ---------------------------------------------------------*/
  header {
    background-color: var(--primary);
    color: white;
    padding: 1rem;
    text-align: center;
    font-size: 1.7rem;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 3px 6px rgba(0,64,133,0.4);
  }

  /* ------------------------------------------------------
     ✅ SHARE BUTTONS CONTAINER & BUTTONS
  ---------------------------------------------------------*/
  .share-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 15px;
  }

  .share-button {
    padding: 8px 15px;
    border-radius: 5px;
    text-decoration: none;
    color: white;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .share-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }

  .share-button i {
    margin-right: 5px;
  }

  /* ------------------------------------------------------
     ✅ VOICE COMMAND CONTAINER & BUTTON
  ---------------------------------------------------------*/
  .voice-command-container {
    padding: 20px;
    text-align: center;
  }

  #voiceCommandBtn {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    font-size: 1.2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.5);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }

  #voiceCommandBtn:hover {
    background-color: #0056b3;
    box-shadow: 0 6px 15px rgba(0, 86, 179, 0.7);
  }

  #voiceCommandBtn i {
    font-size: 2rem;
    margin-bottom: 10px;
  }

  #voiceStatus {
    min-height: 50px;
    margin-top: 15px;
    color: #444;
    font-weight: 600;
  }

  /* ------------------------------------------------------
     ✅ RESPONSIVE TWEAKS FOR SMALL SCREENS
  ---------------------------------------------------------*/
  @media (max-width: 576px) {
    .call-button {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }

    .voice-command-container {
      padding: 10px;
    }

    #voiceCommandBtn {
      width: 150px;
      height: 150px;
      font-size: 1rem;
    }

    #voiceCommandBtn i {
      font-size: 1.5rem;
      margin-bottom: 6px;
    }
  }

  .emergency-header {
  margin: 40px 0 30px;
  padding: 20px;
  background: linear-gradient(90deg, #6d4accff, #460879ff);
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(255, 65, 108, 0.2);
  color: #fff;
  animation: fadeIn 1s ease-out;
}

.emergency-title {
  font-size: 2.2rem;
  font-weight: 800;
  margin-bottom: 10px;
  color: #fff;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.emergency-subtext {
  font-size: 1.1rem;
  font-weight: 400;
  margin: 0;
  color: #fff;
  opacity: 0.95;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

</style>











</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item"><a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a></li>
      <li class="nav-item d-none d-sm-inline-block"><a href="#" class="nav-link">Home</a></li>
    </ul>
  </nav>
  <!-- Sidebar -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="dashboard.html" class="brand-link">
      <img src="dist/img/AdminLTELogo.png" alt="Logo" class="brand-image img-circle elevation-3">
      <span class="brand-text font-weight-light">SafeWay</span>
    </a>






      <div class="sidebar">
        <nav class="mt-3">
          <ul class="nav nav-pills nav-sidebar flex-column" role="menu">
            <li class="nav-item"><a href="dashboard.html" class="nav-link"><i class="nav-icon fas fa-tachometer-alt"></i><p>Dashboard</p></a></li>
            <li class="nav-item"><a href="location_search.html" class="nav-link"><i class="nav-icon fas fa-search-location"></i><p>Basic Location Search</p></a></li>
            <li class="nav-item"><a href="map_explore.html" class="nav-link"><i class="nav-icon fas fa-map-marked-alt"></i><p>Map Exploration</p></a></li>
            <li class="nav-item"><a href="safety_ratings.html" class="nav-link"><i class="nav-icon fas fa-eye"></i><p>Visual Safety Ratings</p></a></li>
            <li class="nav-item"><a href="check_safety.html" class="nav-link"><i class="nav-icon fas fa-shield-alt"></i><p>Check Before Going Out</p></a></li>
            <li class="nav-item"><a href="identify_routes.html" class="nav-link"><i class="nav-icon fas fa-route"></i><p>Identify Safer Routes</p></a></li>
            <li class="nav-item"><a href="filter_incidents.html" class="nav-link"><i class="nav-icon fas fa-filter"></i><p>Filter Incidents</p></a></li>
            <li class="nav-item"><a href="crime_hotspot.html" class="nav-link"><i class="nav-icon fas fa-exclamation-triangle"></i><p>Crime Hotspot Tracker</p></a></li>
            <li class="nav-item"><a href="community_resources.html" class="nav-link"><i class="nav-icon fas fa-hands-helping"></i><p>Community Resources</p></a></li>
            <li class="nav-item"><a href="understand_factors.html" class="nav-link"><i class="nav-icon fas fa-lightbulb"></i><p>Understanding Safety Factors</p></a></li>
            <li class="nav-item"><a href="legend_info.html" class="nav-link"><i class="nav-icon fas fa-map"></i><p>Using the Legend</p></a></li>
            <li class="nav-item"><a href="send_notifications.html" class="nav-link"><i class="nav-icon fas fa-bell"></i><p>Send Notifications</p></a></li>
            <li class="nav-item"><a href="all_notifications.html" class="nav-link "><i class="nav-icon fas fa-bell"></i><p>All Notifications</p></a></li>
            <li class="nav-item"><a href="emergency_calls.html" class="nav-link active"><i class="nav-icon fas fa-phone-alt"></i><p>Emergency Calls</p></a></li>
            <li class="nav-item"><a href="login.html" class="nav-link"><i class="nav-icon fas fa-sign-out-alt"></i><p>Logout</p></a></li>
          </ul>
        </nav>
      </div>



  </aside>






<!-- Main Content -->
<div class="content-wrapper p-3">
  <div class="container-fluid">
    <div class="emergency-header text-center">
      <h2 class="emergency-title">
        🚨 Emergency & Trusted Calls
      </h2>
      <p class="emergency-subtext">
        Reach help instantly — whether it's authorities or someone you trust.
      </p>
    </div>

    <!-- Emergency Services -->
    <div class="section-title">Emergency Services</div>
    <!-- Hardcoded emergency numbers for demonstration -->
    <div class="call-button bg-danger text-white" onclick="window.location.href='tel:999'">
      <div>
        <i class="fas fa-shield-alt call-icon"></i> 
        Police
        <br>
        <small class="text-light">
          <i class="fas fa-phone-alt"></i> 999
          <br><i class="fas fa-info-circle"></i> Local Police Emergency
        </small>
      </div>
      <i class="fas fa-phone"></i>
    </div>
    <div class="call-button bg-danger text-white" onclick="window.location.href='tel:998'">
      <div>
        <i class="fas fa-shield-alt call-icon"></i> 
        Fire Service
        <br>
        <small class="text-light">
          <i class="fas fa-phone-alt"></i> 998
          <br><i class="fas fa-info-circle"></i> Fire and Rescue
        </small>
      </div>
      <i class="fas fa-phone"></i>
    </div>
    <!-- Add more emergency numbers here as needed -->

    <!-- Add Emergency Number Button -->
    <button type="button" class="btn btn-primary mb-3" data-toggle="modal" data-target="#addEmergencyNumberModal">
      <i class="fas fa-plus"></i> Add Emergency Number
    </button>

    <!-- Add Emergency Number Modal -->
    <div class="modal fade" id="addEmergencyNumberModal" tabindex="-1" role="dialog" aria-labelledby="addEmergencyNumberModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addEmergencyNumberModalLabel">Add Emergency Number</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form id="emergencyNumberForm">
            <div class="modal-body">
              <div class="form-group">
                <label for="emergency_title">Title (e.g., Police, Fire Service)</label>
                <input type="text" class="form-control" id="emergency_title" name="title" required>
              </div>
              <div class="form-group">
                <label for="emergency_phone">Phone Number</label>
                <input type="tel" class="form-control" id="emergency_phone" name="phone_number" required>
              </div>
              <div class="form-group">
                <label for="emergency_description">Description (Optional)</label>
                <textarea class="form-control" id="emergency_description" name="description" rows="2"></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Add Emergency Number</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Trusted Contacts -->
    <div class="section-title">Trusted Contacts</div>

    <!-- Add Trusted Number Button -->
    <button type="button" class="btn btn-primary mb-3" data-toggle="modal" data-target="#addTrustedNumberModal">
      <i class="fas fa-plus"></i> Add Trusted Number
    </button>

    <!-- Example Trusted Contacts List -->
    <div class="call-button" onclick="window.location.href='tel:+880123456789'">
      <div>
        <i class="fas fa-user-shield call-icon"></i> 
        Mother
        <small class="text-muted">(Primary contact)</small>
      </div>
      <i class="fas fa-phone text-success"></i>
    </div>
    <div class="call-button" onclick="window.location.href='tel:+880198765432'">
      <div>
        <i class="fas fa-user-shield call-icon"></i> 
        Brother
      </div>
      <i class="fas fa-phone text-success"></i>
    </div>

    <!-- Add Trusted Number Modal -->
    <div class="modal fade" id="addTrustedNumberModal" tabindex="-1" role="dialog" aria-labelledby="addTrustedNumberModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addTrustedNumberModalLabel">Add Trusted Number</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form id="trustedNumberForm">
            <div class="modal-body">
              <div class="form-group">
                <label for="trusted_title">Title (e.g., Mother, Father, Brother)</label>
                <input type="text" class="form-control" id="trusted_title" name="title" required>
              </div>
              <div class="form-group">
                <label for="trusted_phone_number">Phone Number</label>
                <input type="tel" class="form-control" id="trusted_phone_number" name="phone_number" required>
              </div>
              <div class="form-group">
                <label for="trusted_special_note">Special Note (Optional)</label>
                <textarea class="form-control" id="trusted_special_note" name="special_note" rows="2"></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Add Contact</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Live Location Sharing -->
    <div class="card p-4">
      <div class="section-title">📍 Live Location Sharing</div>
      <p>Share your real-time location with emergency contacts to help them find you quickly.</p>
      <button class="btn btn-primary" onclick="shareLocation()">Share My Location</button>
      
      <!-- Sharing Options (Initially Hidden) -->
      <div id="sharingOptions" class="mt-3" style="display: none;">
        <div class="alert alert-info">
          <p id="locationMessage" class="mb-2"></p>
          <div class="share-buttons">
            <a id="whatsappShare" class="share-button" style="background-color: #25D366;" target="_blank" rel="noopener noreferrer">
              <i class="fab fa-whatsapp"></i> Share on WhatsApp
            </a>
            <a id="messengerShare" class="share-button" style="background-color: #0084FF;" target="_blank" rel="noopener noreferrer">
              <i class="fab fa-facebook-messenger"></i> Share on Messenger
            </a>
            <a id="smsShare" class="share-button" style="background-color: #6c757d;" target="_blank" rel="noopener noreferrer">
              <i class="fas fa-sms"></i> Share via SMS
            </a>
            <button class="share-button" style="background-color: #17a2b8;" onclick="copyLocationLink()">
              <i class="fas fa-copy"></i> Copy Link
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Emergency Message Templates -->
    <div class="card p-4">
      <div class="section-title">✉️ Emergency Message Templates</div>
      <p>Quickly send pre-written messages during emergencies.</p>
      
      <!-- Message Type Selection -->
      <div class="mb-3">
        <button type="button" class="btn btn-danger mb-2" onclick="prepareEmergencyMessage('help')">
          <i class="fas fa-exclamation-triangle"></i> Send: I need help
        </button>
        <button type="button" class="btn btn-success" onclick="prepareEmergencyMessage('safe')">
          <i class="fas fa-check-circle"></i> Send: I am safe
        </button>
      </div>

      <!-- Sending Options Modal -->
      <div class="modal fade" id="sendingOptionsModal" tabindex="-1" role="dialog" aria-labelledby="sendingOptionsModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="sendingOptionsModalLabel">Choose Sending Method</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form id="emergencyMessageForm">
                <input type="hidden" name="latitude" id="messageLatitude" />
                <input type="hidden" name="longitude" id="messageLongitude" />
                <input type="hidden" name="message_type" id="messageType" />
                <input type="hidden" name="send_emergency_message" value="1" />
                
                <div class="form-group">
                  <label>Select sending method:</label>
                  <div class="btn-group-vertical w-100">
                    <button type="button" onclick="sendViaWhatsApp()" class="btn btn-success mb-2">
                      <i class="fab fa-whatsapp"></i> Send via WhatsApp
                    </button>
                    <button type="button" onclick="sendViaSMS()" class="btn btn-primary">
                      <i class="fas fa-sms"></i> Send via SMS
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Panic Button -->
    <div class="card p-4 text-center">
      <div class="section-title">🚨 Panic Button</div>
      <button class="btn-panic" onclick="activatePanicButton()">
        <i class="fas fa-exclamation-triangle"></i> Panic Button
      </button>
    </div>

    <!-- Medical ID Display -->
    <div class="card p-4">
      <div class="section-title">🩺 Medical ID</div>
      
      <!-- Example Medical Info -->
      <p><strong>Name:</strong> Abdullah Shanto</p>
      <p><strong>Blood Type:</strong> O+</p>
      <p><strong>Allergies:</strong> Penicillin</p>
      <p><strong>Medications:</strong> None</p>
      <p><strong>Medical Conditions:</strong> Asthma</p>

      <button class="btn btn-secondary mb-2" data-toggle="modal" data-target="#editMedicalInfoModal">
        <i class="fas fa-edit"></i> Edit Medical Info
      </button>

      <!-- Edit Medical Info Modal -->
      <div class="modal fade" id="editMedicalInfoModal" tabindex="-1" role="dialog" aria-labelledby="editMedicalInfoModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="editMedicalInfoModalLabel">Edit Medical Information</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form id="medicalInfoForm">
              <div class="modal-body">
                <div class="form-group">
                  <label for="medical_name">Full Name</label>
                  <input type="text" class="form-control" id="medical_name" name="name" value="Jane Doe" required>
                </div>
                <div class="form-group">
                  <label for="medical_blood_type">Blood Type</label>
                  <input type="text" class="form-control" id="medical_blood_type" name="blood_type" value="O+" required>
                </div>
                <div class="form-group">
                  <label for="medical_allergies">Allergies</label>
                  <textarea class="form-control" id="medical_allergies" name="allergies" rows="2">Penicillin</textarea>
                </div>
                <div class="form-group">
                  <label for="medical_medications">Medications</label>
                  <textarea class="form-control" id="medical_medications" name="medications" rows="2">None</textarea>
                </div>
                <div class="form-group">
                  <label for="medical_conditions">Medical Conditions</label>
                  <textarea class="form-control" id="medical_conditions" name="conditions" rows="2">Asthma</textarea>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save Info</button>
              </div>
            </form>
          </div>
        </div>
      </div>

    </div>

    <!-- Voice Command Activation -->
    <div class="card p-4">
      <div class="section-title">🎤 Emergency Voice Detection</div>
      <p class="voice-note">Click the button and say any emergency word like "help", "emergency", or "danger" to call emergency services immediately</p>
      
      <div class="voice-command-container text-center">
        <button id="voiceCommandBtn" class="btn btn-primary btn-lg">
          <i class="fas fa-microphone"></i> Click to Speak
        </button>
        <div id="voiceStatus" class="mt-2"></div>
      </div>
    </div>

    <!-- Scheduled Calls Section -->
    <div class="card p-4">
      <div class="section-title">⏰ Emergency Call</div>
      <p class="text-muted">A call to be made automatically at a specific time (up to 24 hours in advance)</p>
      
      <form id="scheduleCallForm">
        <div class="form-group">
          <label for="scheduled_phone_number">Phone Number to Call</label>
          <input type="tel" class="form-control" id="scheduled_phone_number" name="phone_number" 
                 required 
                 placeholder="e.g., +8801600347734">
          <small class="form-text text-muted">Enter the phone number you want to call</small>
        </div>
        <div class="form-group">
          <label for="scheduled_time">Time</label>
          <input type="datetime-local" class="form-control" id="scheduled_time" name="scheduled_time" 
                 min="" 
                 max="" required>
          <small class="form-text text-muted">Select a time within the next 24 hours</small>
        </div>
        <button type="submit" class="btn btn-primary">Schedule Call</button>
      </form>

      <!-- Scheduled calls display removed as no backend -->
    </div>

    <!-- Satellite Communication Fallback -->
    <div class="card p-4">
      <div class="section-title">🛰️ Satellite Communication (Fallback)</div>
      <p>If there's no cellular signal, SafeWay will attempt to use available satellite APIs or fallback mechanisms for sending alerts. (Available in premium devices)</p>
      <button class="btn btn-dark" disabled>Activate Satellite SOS (Coming Soon)</button>
    </div>

    <!-- QR Code for Emergency Page -->
    <div class="card p-4 text-center">
      <div class="section-title">🔗 Quick Access QR (Backup)</div>
      <p>Scan this to access Emergency Panel from another device</p>
      <div class="qr-box">
        <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://yourdomain.com/emergency_calls.php&size=150x150" alt="QR Code" />
      </div>
    </div>
  </div>
</div>

<!-- JS dependencies -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<script>
// Enable/disable Add Emergency Number submit button based on validation
$('#emergencyNumberForm input, #emergencyNumberForm textarea').on('input', function() {
  let form = $('#emergencyNumberForm')[0];
  $('#emergencyNumberForm button[type="submit"]').prop('disabled', !form.checkValidity());
});

// Enable/disable Add Trusted Number submit button based on validation
$('#trustedNumberForm input, #trustedNumberForm textarea').on('input', function() {
  let form = $('#trustedNumberForm')[0];
  $('#trustedNumberForm button[type="submit"]').prop('disabled', !form.checkValidity());
});

// Enable/disable Medical Info save button based on validation
$('#medicalInfoForm input, #medicalInfoForm textarea').on('input', function() {
  let form = $('#medicalInfoForm')[0];
  $('#medicalInfoForm button[type="submit"]').prop('disabled', !form.checkValidity());
});

// Setup min and max for schedule time input
const scheduleInput = document.getElementById('scheduled_time');
function setScheduleTimeLimits() {
  const now = new Date();
  const minTime = now.toISOString().slice(0,16);
  const maxDate = new Date(now.getTime() + 24 * 60 * 60 * 1000);
  const maxTime = maxDate.toISOString().slice(0,16);
  scheduleInput.min = minTime;
  scheduleInput.max = maxTime;
}
setScheduleTimeLimits();

// Enable Schedule Call button only when form valid
$('#scheduleCallForm input').on('input', function() {
  let form = $('#scheduleCallForm')[0];
  $('#scheduleCallForm button[type="submit"]').prop('disabled', !form.checkValidity());
});

// Initially disable Schedule Call submit until valid inputs
$('#scheduleCallForm button[type="submit"]').prop('disabled', true);

// Form submission stubs
$('#emergencyNumberForm').submit(function(e){
  e.preventDefault();
  alert('Add Emergency Number feature requires backend implementation.');
  $('#addEmergencyNumberModal').modal('hide');
});

$('#trustedNumberForm').submit(function(e){
  e.preventDefault();
  alert('Add Trusted Contact feature requires backend implementation.');
  $('#addTrustedNumberModal').modal('hide');
});

$('#medicalInfoForm').submit(function(e){
  e.preventDefault();
  alert('Save Medical Info feature requires backend implementation.');
  $('#editMedicalInfoModal').modal('hide');
});

$('#scheduleCallForm').submit(function(e){
  e.preventDefault();
  alert('Schedule Call feature requires backend implementation.');
});

</script>

</body>
</html>
