
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Emergency & Trusted Contacts - SafeWay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Font & AdminLTE CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  
  
  <style>
  /* ------------------------------------------------------
     ✅ GENERAL LAYOUT & COLOR THEME STYLES
  ---------------------------------------------------------*/
  body {
    font-family: 'Source Sans Pro', sans-serif;
    background-color: #f9fafe;
  }

  .content-wrapper {
    background: #fdfefe;
    padding: 40px 35px 60px;
    min-height: calc(100vh - 56px);
  }

  /* ------------------------------------------------------
     ✅ NAVBAR STYLING
  ---------------------------------------------------------*/
  .main-header.navbar {
    background: #004085;
    color: white;
    font-weight: 600;
    box-shadow: 0 3px 8px rgba(0, 64, 133, 0.3);
  }

  .main-header.navbar .nav-link,
  .main-header.navbar .nav-icon {
    color: #cce0ff;
    transition: color 0.3s ease;
  }

  .main-header.navbar .nav-link:hover {
    color: #ffffff;
  }

  /* ------------------------------------------------------
     ✅ SIDEBAR STYLING
  ---------------------------------------------------------*/
  .main-sidebar {
    background-color: rgb(28, 31, 34);
    color: #ffffff;
  }

  .main-sidebar .brand-link {
    background-color: rgb(34, 38, 43);
    color: #ffffff;
    font-weight: bold;
    border-bottom: 1px solid #003366;
  }

  .main-sidebar .nav-link {
    color: #cfd9ff;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .main-sidebar .nav-link .nav-icon {
    color: #a0b8ff;
  }

  .main-sidebar .nav-link.active,
  .main-sidebar .nav-link:hover {
    background-color: #e6f0ff;
    color: #001f3f;
    font-weight: bold;
    border-radius: 8px;
  }

  .main-sidebar .nav-link.active .nav-icon,
  .main-sidebar .nav-link:hover .nav-icon {
    color: #001f3f;
  }

  /* ------------------------------------------------------
     ✅ BUTTON STYLES
  ---------------------------------------------------------*/
  .btn-panic {
    background-color: #dc3545;
    color: #fff;
    font-size: 1.2rem;
    padding: 15px;
    border: none;
    border-radius: 10px;
    width: 100%;
    margin-bottom: 15px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .btn-panic:hover {
    background-color: #c82333;
  }

  /* ------------------------------------------------------
     ✅ CALL BUTTON STYLING
  ---------------------------------------------------------*/
  .call-button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    transition: background-color 0.2s ease;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  .call-button:hover {
    background-color: #e2e6ea;
  }

  .call-icon {
    font-size: 1.8rem;
    margin-right: 10px;
    color: #007bff;
  }

  /* ------------------------------------------------------
     ✅ QR CODE BOX STYLE
  ---------------------------------------------------------*/
  .qr-box {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 10px;
    text-align: center;
    padding: 15px;
    box-shadow: 0 1px 6px rgba(0,0,0,0.1);
  }

  /* ------------------------------------------------------
     ✅ VOICE NOTE TEXT STYLE
  ---------------------------------------------------------*/
  .voice-note {
    font-style: italic;
    color: #555;
    margin-top: 8px;
  }

  /* ------------------------------------------------------
     ✅ SECTION TITLE STYLE
  ---------------------------------------------------------*/
  .section-title {
    font-size: 1.2rem;
    font-weight: bold;
    margin-top: 30px;
    margin-bottom: 15px;
    color: #003366;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  /* ------------------------------------------------------
     ✅ INFO BOX STYLE
  ---------------------------------------------------------*/
  .info-box {
    background-color: #e9ecef;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
    color: #333;
  }

  /* ------------------------------------------------------
     ✅ FORM CONTROL SPACING
  ---------------------------------------------------------*/
  .form-control {
    margin-bottom: 10px;
  }

  /* ------------------------------------------------------
     ✅ HEADER STYLE
  ---------------------------------------------------------*/
  header {
    background-color: var(--primary);
    color: white;
    padding: 1rem;
    text-align: center;
    font-size: 1.7rem;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 3px 6px rgba(0,64,133,0.4);
  }

  /* ------------------------------------------------------
     ✅ SHARE BUTTONS CONTAINER & BUTTONS
  ---------------------------------------------------------*/
  .share-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 15px;
  }

  .share-button {
    padding: 8px 15px;
    border-radius: 5px;
    text-decoration: none;
    color: white;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .share-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }

  .share-button i {
    margin-right: 5px;
  }

  /* ------------------------------------------------------
     ✅ VOICE COMMAND CONTAINER & BUTTON
  ---------------------------------------------------------*/
  .voice-command-container {
    padding: 20px;
    text-align: center;
  }

  #voiceCommandBtn {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    font-size: 1.2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.5);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }

  #voiceCommandBtn:hover {
    background-color: #0056b3;
    box-shadow: 0 6px 15px rgba(0, 86, 179, 0.7);
  }

  #voiceCommandBtn i {
    font-size: 2rem;
    margin-bottom: 10px;
  }

  #voiceStatus {
    min-height: 50px;
    margin-top: 15px;
    color: #444;
    font-weight: 600;
  }

  /* ------------------------------------------------------
     ✅ RESPONSIVE TWEAKS FOR SMALL SCREENS
  ---------------------------------------------------------*/
  @media (max-width: 576px) {
    .call-button {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }

    .voice-command-container {
      padding: 10px;
    }

    #voiceCommandBtn {
      width: 150px;
      height: 150px;
      font-size: 1rem;
    }

    #voiceCommandBtn i {
      font-size: 1.5rem;
      margin-bottom: 6px;
    }
  }

  .emergency-header {
  margin: 40px 0 30px;
  padding: 20px;
  background: linear-gradient(90deg, #6d4accff, #460879ff);
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(255, 65, 108, 0.2);
  color: #fff;
  animation: fadeIn 1s ease-out;
}

.emergency-title {
  font-size: 2.2rem;
  font-weight: 800;
  margin-bottom: 10px;
  color: #fff;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.emergency-subtext {
  font-size: 1.1rem;
  font-weight: 400;
  margin: 0;
  color: #fff;
  opacity: 0.95;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

</style>











</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item"><a class="nav-link" data-widget="pushmenu" href="dashboard.html"><i class="fas fa-bars"></i></a></li>
      <li class="nav-item d-none d-sm-inline-block"><a href="#" class="nav-link">Home</a></li>
    </ul>
  </nav>

  

    <!-- Sidebar -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
  <a href="dashboard.html" class="brand-link">
    <img src="dist/img/AdminLTELogo.png" alt="Logo" class="brand-image img-circle elevation-3">
    <span class="brand-text font-weight-light">SafeWay</span>
  </a>
  <div class="sidebar">
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" role="menu">
        <li class="nav-item"><a href="dashboard.html" class="nav-link"><i class="nav-icon fas fa-tachometer-alt"></i><p>Dashboard</p></a></li>
        <li class="nav-item"><a href="location_search.html" class="nav-link"><i class="nav-icon fas fa-shield-alt"></i><p>Safety Control Center</p></a></li>
        <li class="nav-item"><a href="safety_unified.html" class="nav-link"><i class="nav-icon fas fa-map-marked-alt"></i><p>Unified Safety Explorer</p></a></li>
        <li class="nav-item"><a href="identify_routes.html" class="nav-link"><i class="nav-icon fas fa-route"></i><p>Identify Safer Routes</p></a></li>
        <li class="nav-item"><a href="filter_incidents.html" class="nav-link"><i class="nav-icon fas fa-exclamation-triangle"></i><p>Incidents & Hotspots</p></a></li>
        <li class="nav-item"><a href="community_resources.html" class="nav-link"><i class="nav-icon fas fa-hands-helping"></i><p>Community Resources</p></a></li>
        <li class="nav-item"><a href="legend_info.html" class="nav-link "><i class="nav-icon fas fa-map"></i><p>Using the Legend</p></a></li>
        <li class="nav-item"><a href="send_notifications.html" class="nav-link"><i class="nav-icon fas fa-bell"></i><p>Send Notifications</p></a></li>
        <li class="nav-item"><a href="all_notifications.html" class="nav-link"><i class="nav-icon fas fa-bell"></i><p>All Notifications</p></a></li>
        <li class="nav-item"><a href="emergency_calls.html" class="nav-link active"><i class="nav-icon fas fa-phone-alt"></i><p>Emergency Calls</p></a></li>
        <li class="nav-item"><a href="login.html" class="nav-link"><i class="nav-icon fas fa-sign-out-alt"></i><p>Logout</p></a></li>
      </ul>
    </nav>
  </div>
</aside>





















  <!-- Main Content -->



  





<div class="content-wrapper p-3">
  <div class="container-fluid">
    
    <div class="emergency-header text-center">
      <h2 class="emergency-title">🚨 Emergency & Trusted Calls</h2>
      <p class="emergency-subtext">Reach help instantly — whether it's authorities or someone you trust.</p>
    </div>

    <!-- Emergency Services -->
    <div class="section-title">Emergency Services</div>
    <div id="emergencyList"></div>
    <button class="btn btn-primary mb-3" data-toggle="modal" data-target="#addEmergencyNumberModal">
      <i class="fas fa-plus"></i> Add Emergency Number
    </button>

    <!-- Add Emergency Number Modal -->
    <div class="modal fade" id="addEmergencyNumberModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="emergencyForm">
            <div class="modal-header"><h5>Add Emergency Number</h5></div>
            <div class="modal-body">
              <div class="form-group"><label>Title</label><input type="text" class="form-control" id="emergency_title" required></div>
              <div class="form-group"><label>Phone Number</label><input type="tel" class="form-control" id="emergency_phone" required></div>
              <div class="form-group"><label>Description</label><textarea class="form-control" id="emergency_description"></textarea></div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Add</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Trusted Contacts -->
    <div class="section-title">Trusted Contacts</div>
    <div id="trustedList"></div>
    <button class="btn btn-primary mb-3" data-toggle="modal" data-target="#addTrustedNumberModal">
      <i class="fas fa-plus"></i> Add Trusted Number
    </button>

    <!-- Add Trusted Contact Modal -->
    <div class="modal fade" id="addTrustedNumberModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="trustedForm">
            <div class="modal-header"><h5>Add Trusted Contact</h5></div>
            <div class="modal-body">
              <div class="form-group"><label>Title</label><input type="text" class="form-control" id="trusted_title" required></div>
              <div class="form-group"><label>Phone Number</label><input type="tel" class="form-control" id="trusted_phone" required></div>
              <div class="form-group"><label>Special Note</label><textarea class="form-control" id="trusted_note"></textarea></div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Add</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Medical Info -->
    <div class="card p-3">
      <div class="section-title">🩺 Medical ID</div>
      <div id="medicalInfoBox"></div>
      <button class="btn btn-primary mb-2" data-toggle="modal" data-target="#medicalInfoModal">
        <i class="fas fa-edit"></i> Add / Edit Medical Info
      </button>
    </div>

    <!-- Medical Info Modal -->
    <div class="modal fade" id="medicalInfoModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <form id="medicalForm">
            <div class="modal-header"><h5>Medical Info</h5></div>
            <div class="modal-body">
              <div class="form-group"><label>Blood Type</label><input type="text" id="blood_type" class="form-control"></div>
              <div class="form-group"><label>Allergies</label><textarea id="allergies" class="form-control"></textarea></div>
              <div class="form-group"><label>Medical Conditions</label><textarea id="medical_conditions" class="form-control"></textarea></div>
              <div class="form-group"><label>Medications</label><textarea id="medications" class="form-control"></textarea></div>
              <div class="form-group"><label>Emergency Contact Name</label><input type="text" id="emergency_contact_name" class="form-control"></div>
              <div class="form-group"><label>Emergency Contact Phone</label><input type="tel" id="emergency_contact_phone" class="form-control"></div>
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Panic Button -->
    <div class="card p-3 text-center">
      <div class="section-title">🚨 Panic Button</div>
      <button class="btn-panic" onclick="activatePanicButton()">
        <i class="fas fa-exclamation-triangle"></i> Panic
      </button>
    </div>
  </div>
</div>

<script src="plugins/jquery/jquery.min.js"></script>
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script>
  // --- LocalStorage Handlers ---
  function getData(key){ return JSON.parse(localStorage.getItem(key) || '[]'); }
  function saveData(key,data){ localStorage.setItem(key, JSON.stringify(data)); }

  // Emergency Numbers
  function renderEmergency(){
    let list=document.getElementById('emergencyList');
    let data=getData('emergencyNumbers');
    list.innerHTML=data.map(n=>`
      <div class="call-button bg-danger text-white" onclick="window.location.href='tel:${n.phone}'">
        <div><i class="fas fa-shield-alt"></i> ${n.title}<br>
          <small><i class="fas fa-phone"></i> ${n.phone} ${n.desc?`<br><i class='fas fa-info'></i> ${n.desc}`:''}</small>
        </div>
        <i class="fas fa-phone"></i>
      </div>`).join('');
  }
  document.getElementById('emergencyForm').onsubmit=function(e){
    e.preventDefault();
    let data=getData('emergencyNumbers');
    data.push({title:emergency_title.value,phone:emergency_phone.value,desc:emergency_description.value});
    saveData('emergencyNumbers',data); renderEmergency(); $('#addEmergencyNumberModal').modal('hide');
  };

  // Trusted Contacts
  function renderTrusted(){
    let list=document.getElementById('trustedList');
    let data=getData('trustedContacts');
    if(!data.length){ list.innerHTML='<div class="alert alert-info">No trusted contacts added yet.</div>'; return;}
    list.innerHTML=data.map(c=>`
      <div class="call-button" onclick="window.location.href='tel:${c.phone}'">
        <div><i class="fas fa-user-shield"></i> ${c.title} ${c.note?`<small>(${c.note})</small>`:''}</div>
        <i class="fas fa-phone text-success"></i>
      </div>`).join('');
  }
  document.getElementById('trustedForm').onsubmit=function(e){
    e.preventDefault();
    let data=getData('trustedContacts');
    data.push({title:trusted_title.value,phone:trusted_phone.value,note:trusted_note.value});
    saveData('trustedContacts',data); renderTrusted(); $('#addTrustedNumberModal').modal('hide');
  };

  // Medical Info
  function renderMedical(){
    let box=document.getElementById('medicalInfoBox');
    let info=JSON.parse(localStorage.getItem('medicalInfo')||'null');
    if(!info){ box.innerHTML='<p class="text-muted">No medical information available.</p>'; return;}
    box.innerHTML=`
      <p><strong>Blood Type:</strong> ${info.blood_type||''}</p>
      <p><strong>Allergies:</strong> ${info.allergies||''}</p>
      <p><strong>Conditions:</strong> ${info.conditions||''}</p>
      <p><strong>Medications:</strong> ${info.medications||''}</p>
      <p><strong>Emergency Contact:</strong> ${info.contact_name} (${info.contact_phone})</p>`;
  }
  document.getElementById('medicalForm').onsubmit=function(e){
    e.preventDefault();
    let info={
      blood_type:blood_type.value,
      allergies:allergies.value,
      conditions:medical_conditions.value,
      medications:medications.value,
      contact_name:emergency_contact_name.value,
      contact_phone:emergency_contact_phone.value
    };
    localStorage.setItem('medicalInfo',JSON.stringify(info));
    renderMedical(); $('#medicalInfoModal').modal('hide');
  };

  // Panic Button
  function activatePanicButton(){
    alert("🚨 Panic triggered! Your emergency contacts will be notified (simulation).");
  }

  // Init
  renderEmergency(); renderTrusted(); renderMedical();
</script>
</body>
</html>